<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üåç SDG 13 Climate AI & Carbon Calculator</title>

<style>
* { box-sizing: border-box; margin:0; padding:0; font-family:"Segoe UI", Tahoma, Geneva, Verdana, sans-serif; }
body { min-height:100vh; background: linear-gradient(135deg,#d4fc79,#96e6a1); display:flex; justify-content:center; align-items:center; padding:20px; }

/* ===== CONTAINER ===== */
.container { width:450px; background:#fff; border-radius:16px; box-shadow:0 12px 30px rgba(0,0,0,0.15); overflow:hidden; }

/* ===== HEADER ===== */
.header { background: linear-gradient(135deg,#2e7d32,#1b5e20); color:#fff; text-align:center; padding:16px; }
.header h1 { font-size:20px; }
.header p { font-size:13px; opacity:0.9; }

/* ===== TABS ===== */
.tabs { display:flex; border-bottom:1px solid #ddd; }
.tab { flex:1; text-align:center; padding:10px; cursor:pointer; font-weight:bold; background:#f1f8e9; transition:background 0.2s; }
.tab.active { background:#e8f5e9; }

/* ===== CONTENT AREAS ===== */
.tab-content { display:none; padding:15px; max-height:500px; overflow-y:auto; }
.tab-content.active { display:block; }

/* ===== CARBON CALCULATOR ===== */
label { font-size:13px; font-weight:600; color:#333; }
input[type="number"] { width:100%; margin:6px 0 16px; padding:10px 12px; border-radius:8px; border:1px solid #ccc; font-size:14px; }
input:focus { outline:none; border-color:#2e7d32; }
button { width:100%; padding:12px; background:linear-gradient(135deg,#2e7d32,#1b5e20); color:#fff; border:none; border-radius:10px; font-size:15px; font-weight:bold; cursor:pointer; transition: transform 0.2s, box-shadow 0.2s; }
button:hover { transform:translateY(-2px); box-shadow:0 6px 15px rgba(0,0,0,0.2); }
.result { margin-top:15px; padding:12px; border-radius:10px; font-weight:bold; text-align:center; display:none; }

/* ===== CHAT ===== */
.chat-box { background:#f1f8e9; padding:10px; height:300px; overflow-y:auto; border-radius:10px; margin-bottom:10px; }
.message { max-width:80%; margin-bottom:8px; padding:10px 14px; border-radius:14px; font-size:14px; line-height:1.4; }
.user { background:#c8e6c9; align-self:flex-end; border-bottom-right-radius:4px; }
.bot { background:#ffffff; align-self:flex-start; border-bottom-left-radius:4px; }
.chat-input { display:flex; }
.chat-input input { flex:1; padding:10px 12px; border-radius:10px; border:1px solid #ccc; }
.chat-input input:focus { border-color:#2e7d32; outline:none; }
.chat-input button { margin-left:8px; padding:10px 16px; background:#2e7d32; color:white; border:none; border-radius:10px; cursor:pointer; font-weight:bold; }
.chat-input button:hover { background:#1b5e20; }
</style>
</head>

<body>
<div class="container">

  <div class="header">
    <h1>üåç SDG 13 Climate AI & Carbon Calculator</h1>
    <p>Ask questions or calculate your carbon footprint</p>
  </div>

  <div class="tabs">
    <div class="tab active" data-tab="calculator">Carbon Calculator</div>
    <div class="tab" data-tab="chatbot">AI Chatbot</div>
  </div>

  <!-- ===== CARBON CALCULATOR ===== -->
  <div class="tab-content active" id="calculator">
    <label>Daily Transport Distance (km)</label>
    <input type="number" id="transport" placeholder="e.g. 20">

    <label>Monthly Electricity Usage (units)</label>
    <input type="number" id="electricity" placeholder="e.g. 150">

    <label>Meat-based Meals per Week</label>
    <input type="number" id="meat" placeholder="e.g. 4">

    <button onclick="checkImpact()">Check Impact</button>

    <div class="result" id="calcResult"></div>
  </div>

  <!-- ===== AI CHATBOT ===== -->
  <div class="tab-content" id="chatbot">
    <div class="chat-box" id="chat"></div>
    <div class="chat-input">
      <input id="input" type="text" placeholder="Ask me anything about climate action..." />
      <button onclick="send()">Send</button>
    </div>
  </div>

</div>

<script>
// ===== TAB SWITCH =====
const tabs = document.querySelectorAll(".tab");
const contents = document.querySelectorAll(".tab-content");
tabs.forEach(tab => {
  tab.addEventListener("click", () => {
    tabs.forEach(t => t.classList.remove("active"));
    contents.forEach(c => c.classList.remove("active"));
    tab.classList.add("active");
    document.getElementById(tab.dataset.tab).classList.add("active");
  });
});

// ===== CARBON CALCULATOR =====
function checkImpact() {
  const t = Number(document.getElementById("transport").value);
  const e = Number(document.getElementById("electricity").value);
  const m = Number(document.getElementById("meat").value);
  const total = t + e + m;
  let level = "";
  if(total <= 4) level = "Low üå±";
  else if(total <= 8) level = "Moderate ‚ö°";
  else level = "High üî•";

  const result = document.getElementById("calcResult");
  result.style.display = "block";
  result.style.background = "#f1f8e9";
  result.style.color = "#1b5e20";
  result.innerText = `Carbon Score: ${total}\nImpact Level: ${level}`;
}

// ===== AI CHATBOT =====
const chat = document.getElementById("chat");
const input = document.getElementById("input");

function addMessage(text, sender) {
  const div = document.createElement("div");
  div.className = `message ${sender}`;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

// Initial bot message
addMessage("Hello üå± I'm your SDG 13 Climate AI. Ask me anything!", "bot");

async function send() {
  const text = input.value.trim();
  if (!text) return;

  addMessage(text, "user");
  input.value = "";

  const thinking = document.createElement("div");
  thinking.className = "message bot";
  thinking.textContent = "Thinking... ü§ñ";
  chat.appendChild(thinking);
  chat.scrollTop = chat.scrollHeight;

  try {
    // üîπ Replace with your public backend URL
    const res = await fetch("https://<YOUR_BACKEND_URL>/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: text })
    });

    const data = await res.json();
    chat.removeChild(thinking);
    addMessage(data.reply || "No response from AI.", "bot");

  } catch (err) {
    chat.removeChild(thinking);
    addMessage("‚ùå Unable to connect to Gemini AI.", "bot");
    console.error(err);
  }
}

// Send on Enter key
input.addEventListener("keypress", function(e) {
  if(e.key === "Enter") send();
});
</script>

</body>
</html>
